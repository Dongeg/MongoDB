<h2>mongodb常用命令</h2>

<h3>连接到mongodb</h3>
```
C:\Users\yufeiyueyue>E:

E:\>cd mongodb/bin

E:\mongodb\bin>mongo 127.0.0.1:27017
MongoDB shell version: 3.2.9
connecting to: 127.0.0.1:27017/test
```
<h3>创建数据库</h3>
MongoDB没有创建数据库的命令，如果你想创建一个“demo”的数据库，先执行
```
use demo
```
然后进行一些数据操作，如新建一个demo_collection表并插入一条数据，命令如下
```
> use demo
switched to db demo
> db.demo_collection.insert({x:1})
WriteResult({ "nInserted" : 1 })
> show dbs
demo   0.000GB
local  0.000GB
```
执行<code>show dbs</code>命令看到demo数据库已经建立

<h3>help查看命令提示</h3>
```
help  查看mongodb支持哪些命令

db.help()   查看当前数据库支持哪些方法

db.user.help()   user为表名    查看当前数据库下的表或者表collection支持哪些方法

db.youColl.find().help();

rs.help();
```
<h3>切换/创建数据库</h3>
当创建一个集合(table)的时候会自动创建当前数据库
```
use yourDB      
```
<h3>查询所有数据库</h3>

```
show dbs
```
<h3>删除当前使用数据库</h3>

```
db.dropDatabase();
```
<h3>从指定主机上克隆数据库</h3>
将指定机器上的数据库的数据克隆到当前数据库
```
db.cloneDatabase(“127.0.0.1”)
```
<h3>从指定的机器上复制指定数据库数据到某个数据库</h3>
将本机的mydb的数据复制到temp数据库中
```
db.copyDatabase("mydb", "temp", "127.0.0.1")
```
<h3>修复当前数据库</h3>

```
db.repairDatabase();
```
<h3>查看当前使用的数据库</h3>

```
db
或
db.getNasme()
```
<h3>显示当前db状态</h3>

```
db.stats()
```
<h3>当前db版本</h3>

```
db.version();
```
<h3>查看当前db的链接机器地址</h3>

```
db.getMongo();
```
<h2>Collection聚集集合</h2>
<h3>创建一个聚集集合（table）</h3>

```
db.createCollection(name, {capped: <Boolean>, autoIndexId: <Boolean>, size: <number>, max <number>} )
```
name:集合的名字

capped:是否启用集合限制，如果开启需要制定一个限制条件，默认为不启用，这个参数没有实际意义

size:限制集合使用空间的大小，默认为没有限制

max:集合中最大条数限制，默认为没有限制

autoIndexId:是否使用_id作为索引，默认为使用(true或false)

size的优先级比max要高

<h4>用法</h4>
常用方法介绍：

1、一般来说，我们创建集合用db.createCollection(name),如：db.createCollection("log"),创建一个名字为log的集合，没有任何的大小，数量限制，使用_id作为默认索引；

2、限制集合空间的大小：db.createCollection("log",{size:1024})或
                       db.createCollection("log",{capped:true,size:1024}),创建一个名字为log集合，限制它的空间大小为1M，如果超过1M的大小，则会删除最早的记录；

3、限制集合的最大条数：db.createCollection("log",{max:1024})，创建一个名字为log集合，最大条数为1024条，超过1024再插入数据的话会删除最早的一条记录。这个不能使用capped:true，否则会报错；

4、即限制最大条数有限制使用空间大小：db.createCollection("log",{size:1024,max:1024})或db.createCollection("log",{capped:true,size:1024,max:1024})，限制集合最大使用空间为1M，最大条数为1024条

以上是参考官方文档和实际测试得出的，也可以看出capped参数没有什么用处，用不用都可以。
<h3></h3>

```

```
<h3></h3>

```

```
<h3></h3>

```

```
<h3></h3>

```

```
<h3></h3>

```

```
<h3></h3>

```

```
<h3></h3>

```

```
<h3></h3>

```

```
<h3></h3>

```

```
<h3></h3>

```

```
<h3></h3>

```

```
<h3></h3>

```

```
<h3></h3>

```

```






























